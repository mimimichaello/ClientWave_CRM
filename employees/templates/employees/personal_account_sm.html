{% extends "employees/base.html" %}
{% load static %}


{% block content %}

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container">
      <a class="navbar-brand text-decoration-none text-warning" href="personal_account">ClientWave CRM</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
              <li class="nav-item"><a class="nav-link active" aria-current="page" href="personal_account">Личный кабинет</a></li>
              <li class="nav-item"><a class="nav-link active" aria-current="page" href="logout_employee">Выйти</a></li>
              <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Актив</a>
                  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                      <li><a class="dropdown-item" href="personal_account">Создать сделку</a></li>
                      <li><a class="dropdown-item" href="personal_account">Добавить клиента</a></li>
                      <li><hr class="dropdown-divider" /></li>
                      <li><a class="dropdown-item" href="personal_account">Задачи</a></li>
                  </ul>
              </li>
          </ul>
      </div>
  </div>
</nav>

<div class="container-fluid">
    <div class="main-body mt-4">
          <div class="row gutters-sm">
            <div class="col-md-4 mb-3">
              <div class="card bg-dark mh-100">
                <div class="card-body">
                  <div class="d-flex flex-column align-items-center text-center mt-3">
                    <img src="https://yt3.googleusercontent.com/ytc/AGIKgqPUTn9hyJIRqLtm46wnUCLY6VOq2EcAYGyWRqPe=s900-c-k-c0x00ffffff-no-rj" alt="Admin" class="rounded-circle" width="150">
                    <div class="mt-4">
                      <h4 class="mt-3">{{ employee.first_name}} {{ employee.last_name}}</h4>
                      <p class="text-secondary mb-1">{{ employee.employee_category }}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-8">
              <div class="card bg-dark">
                <div class="card-body">
                  <h3 class="mb-2 text-primary">Клиенты</h3>
                  <form method="GET" action="">
                    <div class="input-group rounded" style="width: 300px; margin-left: 650px; margin-top: -40px">
                        <input type="search" name="query" class="form-control rounded" placeholder="Поиск" aria-label="Search" aria-describedby="search-addon" />
                        <span class="input-group-text border-0" id="search-addon">
                            <button id="search-button" type="submit" class="btn btn-primary">
                                <i class="bi bi-search"></i>
                            </button>
                        </span>
                    </div>
                </form>
                    <hr class="bg-danger">
                  <div class="mt-3">
                      <table class="table table-bordered border-info">
                        <thead>
                          <tr>
                            <th scope="col">№</th>
                            <th scope="col">Имя</th>
                            <th scope="col">Фамилия</th>
                            <th scope="col">Адрес</th>
                            <th scope="col">Email</th>
                            <th scope="col">Телефон</th>
                            <th scope="col">День Рождения</th>
                            <th scope="col">Пол</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for customer in page_obj %}
                              <tr class="">
                                  <th scope="row">{{ forloop.counter }}</th>
                                  <td>{{ customer.first_name }}</td>
                                  <td>{{ customer.last_name }}</td>
                                  <td>{{ customer.address }}</td>
                                  <td>{{ customer.email }}</td>
                                  <td>{{ customer.phone }}</td>
                                  <td>{{ customer.date_of_birth }}</td>
                                  <td>{{ customer.gender }}</td>
                              </tr>
                          {% endfor %}
                      </tbody>
                      <div class="pagination" style="margin-top: -10px;">
                          <span class="step-links">
                            {% if page_obj.has_other_pages %}
                            <nav aria-label="Page navigation example">
                                <ul class="pagination">
                                    {% if page_obj.has_previous %}
                                        <li class="page-item">
                                            <a class="page-link" href="?page=1" aria-label="First">
                                                <span aria-hidden="true">&laquo;&laquo;</span>
                                            </a>
                                        </li>
                                        <li class="page-item">
                                            <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">
                                                <span aria-hidden="true">&laquo;</span>
                                            </a>
                                        </li>
                                    {% endif %}

                                    {% for num in page_obj.paginator.page_range %}
                                        <li class="page-item {% if num == page_obj.number %}active{% endif %}">
                                            <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                                        </li>
                                    {% endfor %}

                                    {% if page_obj.has_next %}
                                        <li class="page-item">
                                            <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next">
                                                <span aria-hidden="true">&raquo;</span>
                                            </a>
                                        </li>
                                        <li class="page-item">
                                            <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}" aria-label="Last">
                                                <span aria-hidden="true">&raquo;&raquo;</span>
                                            </a>
                                        </li>
                                    {% endif %}
                                </ul>
                            </nav>
                        {% endif %}
                          </span>
                        </div>
                      </table>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-4 mb-3">
              <div class="card bg-dark mh-100">
                <div class="card-body">
                  <div class="d-flex flex-column align-items-center text-center mt-3">
                    <img src="https://yt3.googleusercontent.com/ytc/AGIKgqPUTn9hyJIRqLtm46wnUCLY6VOq2EcAYGyWRqPe=s900-c-k-c0x00ffffff-no-rj" alt="Admin" class="rounded-circle" width="150">
                    <div class="mt-4">
                      <h4 class="mt-3">{{ employee.first_name}} {{ employee.last_name}}</h4>
                      <p class="text-secondary mb-1">{{ employee.employee_category }}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-8">
              <div class="card bg-dark">
                <div class="card-body">
                  <h3 class="mb-2 text-primary">Заказы</h3>
                  <div class="mt-3">
                    <div class="btn-group" role="group" aria-label="Order Status Filter">
                        <a href="?status=" class="btn btn-outline-primary text-decoration-none">Все</a>
                        <a href="?status=В обработке" class="btn btn-outline-primary text-decoration-none">В обработке</a>
                        <a href="?status=Выполнен" class="btn btn-outline-primary text-decoration-none">Выполнены</a>
                        <a href="?status=Отменен" class="btn btn-outline-primary text-decoration-none">Отменен</a>
                        <a href="?status=Ожидает отправки" class="btn btn-outline-primary text-decoration-none">Ожидает отправки</a>
                        <a href="?status=Отправлен" class="btn btn-outline-primary text-decoration-none">Отправлен</a>
                        <a href="?payment_status=Оплачен" class="btn btn-outline-info text-decoration-none">Оплачен</a>
                        <a href="?payment_status=Не оплачен" class="btn btn-outline-info text-decoration-none">Не оплачен</a>
                    </div>
                    <hr class="bg-danger">
                  <div class="mt-3">
                      <table class="table table-bordered border-info">
                        <thead>
                          <tr>
                            <th scope="col">№</th>
                            <th scope="col">Клиент</th>
                            <th scope="col">общая стоимость</th>
                            <th scope="col">Адрес</th>
                            <th scope="col">Статус заказа</th>
                            <th scope="col">Статус платежа</th>
                            <th scope="col">ID Транзакции</th>
                            <th scope="col">Дата заказа</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for order in page_obj_orders %}
                              <tr class="">
                                  <th scope="row">{{ forloop.counter }}</th>
                                  <td>{{ order.customer }}</td>
                                  <td>{{ order.total_price }}</td>
                                  <td>{{ order.shipping_address }}</td>
                                  <td>{{ order.status }}</td>
                                  <td>{{ order.payment_status }}</td>
                                  <td>{{ order.transaction_id }}</td>
                                  <td>{{ order.order_date }}</td>
                              </tr>
                          {% endfor %}
                      </tbody>
                      <div class="pagination" style="margin-top: -10px;">
                          <span class="step-links">
                            {% if page_obj_orders.has_other_pages %}
                            <nav aria-label="Page navigation example">
                                <ul class="pagination">
                                    {% if page_obj_orders.has_previous %}
                                        <li class="page-item">
                                            <a class="page-link" href="?page_orders=1" aria-label="First">
                                                <span aria-hidden="true">&laquo;&laquo;</span>
                                            </a>
                                        </li>
                                        <li class="page-item">
                                            <a class="page-link" href="?page_orders={{ page_obj_orders.previous_page_number }}" aria-label="Previous">
                                                <span aria-hidden="true">&laquo;</span>
                                            </a>
                                        </li>
                                    {% endif %}

                                    {% for num in page_obj_orders.paginator.page_range %}
                                        <li class="page-item {% if num == page_obj_orders.number %}active{% endif %}">
                                            <a class="page-link" href="?page_orders={{ num }}">{{ num }}</a>
                                        </li>
                                    {% endfor %}

                                    {% if page_obj_orders.has_next %}
                                        <li class="page-item">
                                            <a class="page-link" href="?page_orders={{ page_obj_orders.next_page_number }}" aria-label="Next">
                                                <span aria-hidden="true">&raquo;</span>
                                            </a>
                                        </li>
                                        <li class="page-item">
                                            <a class="page-link" href="?page_orders={{ page_obj_orders.paginator.num_pages }}" aria-label="Last">
                                                <span aria-hidden="true">&raquo;&raquo;</span>
                                            </a>
                                        </li>
                                    {% endif %}
                                </ul>
                            </nav>
                        {% endif %}
                          </span>
                        </div>
                      </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
{% endblock content %}
